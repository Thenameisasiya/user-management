{{!-- css link --}}
<link rel="stylesheet" href="/styles/userlogin.css">


{{!--  user login code --}}
<main class="main">
	<div class="container">
		<section class="wrapper">
			<div class="heading">
				 <h1 class="text text-large">Sign In</h1><br>
				{{!-- <p class="text text-normal">New user? <span><a href="#" class="text text-links" >Create an account</a></span> --}}
				</p>
			</div>
			<form name="signin" class="form"  method="post" action="/user/login">
				<div class="input-control">
					<label for="email" class="input-label" hidden>Email Address</label>
					<input type="email" name="email" id="email" class="input-field" placeholder="Email Address">
				</div>
				<div class="input-control">
					<label for="password" class="input-label" hidden>Password</label>
					<input type="password" name="password" id="password" class="input-field" placeholder="Password">
				</div>
				<div class="input-control">
					<input type="submit" name="login" class="input-submit" value="Sign In" >
				</div>
			</form>
      <div class="already-account">
        <p>Don't have an account ? 
          <a href="/user/register" class="already-account-link">Register</a>
        </p>
      </div>
			<div class="striped">
				<span class="striped-line"></span>
				<span class="striped-text">Or</span>
				<span class="striped-line"></span>
			</div>
			<div class="method">
				<div class="method-control">
					<a href="#" class="method-action">
						 <i class="ion ion-logo-google"></i> 
						<span>Use Google</span>
					</a>
				</div>
				<div class="method-control">
					<a href="#" class="method-action">
						<i class="ion ion-logo-facebook"></i>
						<span>Use Facebook</span>
					</a>
				</div>
			</div>
		</section>
	</div>
</main>

{{!-- sweet alert --}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
{{!-- script for register --}}

<script>
document.addEventListener('DOMContentLoaded', function () {
  document.querySelector('form').addEventListener('submit', formValidate);
});

function formValidate(e) {
  e.preventDefault(); // Prevent form submission

  // Get the email and password values
  let email = document.getElementById('email').value.trim();
  let password = document.getElementById('password').value.trim();

  // Validate fields are not empty
  if (!email || !password) {
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: 'Both Email and Password are required!',
    });
    return;
  }

  // Additional validation for email format (optional)
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: 'Please enter a valid email address!',
    });
    return;
  }

  // Show a success message (assuming the login data is valid)
  Swal.fire({
    icon: 'success',
    title: 'Success',
    text: 'Processing login...',
    showConfirmButton: false,
    timer: 1500, 
  });

  // Submit the form after validation
  e.target.submit();
}
</script>

 {{#if message}}
<script>
  const message = "{{message}}";
  if (message) {
    Swal.fire({
      icon: message === "User created successfully" ? "success" : "error",
      title: message,
      showConfirmButton: false,
      timer: 2000, // 2 seconds
    });
  }
</script>
 {{/if}}